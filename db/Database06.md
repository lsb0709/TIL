# 모델링



- 데이터베이스의 구조나 형식으로 모델 구조만 보고 어떤 데이터를 다루는지 알 수 있음

- 개념적 데이터 모델링
  - 데이터의 요구사항을 찾고 분석하는 과정, 핵심 개체(Entity) 사이의 관계를 찾아내고 표현
- 논리적 데이터 모델링
  - 데이터베이스 설계 프로세스의 과정으로 정보의 논리적인 구조와 규칙을 명확하게 표현하는 기법/과정
- 물리적 데이터 모델링
  - 논리적 데이터 모델이 데이터 저장소로서 어떻게 실제로 저장될 것인가
- ERD(Entity Relation Diagram) - 개체 관계 모델
  - 엔터티(Entity) : 업무가 관여하는 정보
  - 속성(Attribute) : 언터티가 가지는 성격, 데이터 타입과 크기 및 제약사항 지정
  - 관계(Relationship) : Entity 간의 관계, 연관성
    - 카디널리티(Cardinality) : 수적 관계
      - 1 : 1 관계 : A는 B를 하나 가진다. B는 A를 하나 가진다.
      - 1 : N 관계 : A는 B를 여러 개 가진다. B는 A의 하나에 해당한다.
      - M : N 관계 : A는 B를 여러 개 가진다. B는 A를 여러개 가진다.
    - 옵셔널리티
      - (1) 필수
      - (0) 선택





## ❗️**1:1 관계**

![테이블-1-1-관계](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/09/%E1%84%90%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%B3%E1%86%AF-1-1-%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8.png?resize=640%2C226&ssl=1)

- 하나의 레코드가 다른 테이블의 레코드 한 개와 연결된 경우이다.
- 다음과 같이 Users 테이블과 Phonebook 테이블이 있다고 가정한다.
- Users 테이블은 ID, name, phone_id를 가지고 있다.
- 이 중 phone_id는 외래키(foreign key)로써, Phonebook 테이블의 ID 와 연결되어 있다.
- Phonebook 테이블은 ID와 phone_number를 가지고 있다.
- 각 전화번호가 단 한 명의 유저와 연결되어 있고, 그 반대도 동일하다면, Users 테이블과 Phonebook 테이블은 1:1 관계(One-to-one relationship)이다.
- 그러나 1:1 관계는 자주 사용하지 않는다.
- 1:1로 나타낼 수 있는 관계라면 Users 테이블에 phone_id를 대신해 phone_number를 직접 저장하는 게 나을 수 있다.

## ❗️**1:N 관계**

![테이블-1-N-관계](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/09/%E1%84%90%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%B3%E1%86%AF-1-N-%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8.png?resize=642%2C235&ssl=1)

- 하나의 레코드가 서로 다른 여러 개의 레코드와 연결된 경우이다.
- Users 테이블과 Phonebook 테이블의 관계를 다음과 같이 가정한다.
- 이 구조에서는 한 명의 유저가 여러 전화번호를 가질 수 있다.
- 그러나 여러명의 유저가 하나의 전화번호를 가질 수는 없다.
- 이런 1:N(일대다) 관계는 관계형 데이터베이스에서 가장 많이 사용한다.

## ❗️**N:M 관계**

- 여러 개의 레코드가 다른 테이블의 여러 개의 레코드와 관계가 있는 경우이다.
- N:M(다대다) 관계를 위해 스키마를 디자인할 때에는, Join 테이블을 만들어 관리한다.
- 1:N(일대다) 관계와 비슷하지만, 양방향에서 다수의 레코드를 가질 수 있다.
- 다음과 같이 여행 상품을 관리하는 테이블이 있다고 가정한다.

![customer-package](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/09/customer-package.png?resize=648%2C179&ssl=1)

- 여러 개의 여행 상품이 있고, 여러 명의 고객이 있다.
- 고객 한 명은 여러 개의 여행 상품을 구매할 수 있고, 여행 상품 하나는 여러 명의 고객이 구매할 수 있다.
- 이렇게 Customer 테이블과 Package table이 따로 존재한다면, N:M(다대다) 관계를 어떻게 표현할 수 있을까?
- 다대다 관계는 두 개의 일대다 관계와 그 모양이 같다.
- 두 개의 테이블과 1:N(일대다) 관계를 형성하는 새로운 테이블로 N:M(다대다) 관계를 나타낼 수 있다.
- 이렇게 다대다 관계를 위한 테이블을 조인 테이블이라고 한다.
- N:M(다대다) 관계를 그림으로 나타내면 다음과 같다.

![테이블-N-M-관계](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/09/%E1%84%90%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%B3%E1%86%AF-N-M-%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8.png?resize=796%2C182&ssl=1)

- customer_package 테이블에서는 고객 한 명이 여러 개의 여행 상품을 가질 수 있고, 여행 상품 하나가 여러 개의 고객을 가질 수 있다.
- customer_package 테이블은 customer_id와 package_id를 묶어주는 역할이다.
- 이 테이블을 통해 어떤 고객이 몇 개의 여행 상품을 구매했는지 또는, 어떤 여행 상품이 몇 명의 고객을 가지고 있는지 등을 확인할 수 있다.
- 이렇게 조인 테이블을 생성하더라도, 조인 테이블을 위한 기본키(여기서는 ID)는 반드시 있어야 한다.
- 만약 외래키를 리스트 형식으로 관리하는 필드가 있다면, 어떤 문제가 발생할 수 있을까? 즉, 조인 테이블 사용하지 않는다면 문제점.
  - 문제 1. 필드에 저장되는 데이터의 크기를 설정해야하는데 엄청 커지게 되고 데이터가 저장되지 못할 수 도 있다.
  - 문제 2. 데이터를 조회하는데 많은 비용이 발생하게 된다.
  - 문제 3. 데이터를 수정할 때 두 곳에 수정이 잘 되었는지 확인이 불편하다. (실수를 유발한다.)



[출처](https://hanamon.kr/%ea%b4%80%ea%b3%84%ed%98%95-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%b2%a0%ec%9d%b4%ec%8a%a4-%ec%84%a4%ea%b3%84-%ea%b4%80%ea%b3%84-%ec%a2%85%eb%a5%98/)



![스크린샷 2022-08-24 오후 9.23.45](/Users/isangbaeg/Desktop/스크린샷 2022-08-24 오후 9.23.45.png)




![데이터베이스06-1](/db/images/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A406-1.png)

![데이터베이스06-2](/db/images/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A406-2.png)



## 정규화



- 정규화 : 데이터베이스 테이블을 설계하는 과정에서 중복성을 제거하여 성능을 향상



- 정규화 종류
  - 제1정규화 : 도메인 원자값
    - 한 속성에 여러 개의 속성이 포함, 같은 유형의 속성이 여러 개로 나눠져 있는 경우 제거
  - 제2정규화 : 부분적 함수 종속성 제거
    - PK가 아닌 모든 칼럼은 PK에 종속되도록 구성
  - 제3정규화 : 이행적 함수 종속성 제거(X -> Y, Y -> Z)
    - 일반 속성 간의 함수 종속 관계가 존개하지 않아야 함